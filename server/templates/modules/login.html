<div id="loginmodule">
  {% if g.user %}
    <p>Welcome, {{ g.user.email }}!
      <button type="button" onclick="logout(event)">Logout</button>
    </p>
  {% else %}
    <div id="loginerror"></div>
    <form id="loginform" onsubmit="login(event)">
      <span class="formrow">
        <label for="email">Email:</label>
        <input type="email" name="email">
      </span>
      <span class="formrow">
        <label for="password">Password:</label>
        <input type="password" name="password"></span>
      <input type="submit">
    </form>
  {% endif %}
</div>

<script>
  function login(event) {
    event.preventDefault();
    let form = document.getElementById("loginform");
    signal("{{ url_for('authenticate') }}", {
        email: form.elements["email"].value,
        password: form.elements["password"].value,
        href: window.location.href,
    });
  }

  function logout(event) {
    event.preventDefault();
    signal("{{ url_for('logout') }}", {href: window.location.href});
  }
</script>

<style>
  .formrow {
    display: inline-block;
  }
</style>
